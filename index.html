<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Mafia God | ุฎุฏุง ูุงูุง">
  <meta name="description" content="Professional Mafia Game Management Tool | ุงุจุฒุงุฑ ุญุฑููโุง ูุฏุฑุช ุจุงุฒ ูุงูุง">

  <title>Mafia God | ุฎุฏุง ูุงูุง</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/svg+xml" href="assets/icon.svg">
  <link rel="icon" type="image/png" sizes="192x192" href="assets/icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="assets/icon-512.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="192x192" href="assets/icon-192.png">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <div id="app">
    <!-- Header -->
    <header class="app-header">
      <div class="app-header__left">
        <h1 class="app-header__title">Mafia God | ุฎุฏุง ูุงูุง</h1>
        <span class="app-header__badge" style="display:none;"></span>
      </div>
      <div class="app-header__right">
        <button class="lang-toggle" id="lang-toggle" title="Toggle language">FA</button>
        <button class="theme-toggle" id="theme-toggle" title="Change accent color">
          <span class="theme-toggle__dot" id="theme-toggle-dot"></span>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="app-main" id="main-content">
      <!-- Views render here -->
      <div class="hero">
        <div class="hero__icon">๐ญ</div>
        <h1 class="hero__title">Mafia God | ุฎุฏุง ูุงูุง</h1>
        <p class="hero__subtitle">Loading... / ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</p>
      </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-route="home">
        <span class="nav-item__icon">๐</span>
        <span class="nav-item__label" data-nav-key="home">ุฎุงูู</span>
      </button>
      <button class="nav-item" data-route="setup">
        <span class="nav-item__icon">โ๏ธ</span>
        <span class="nav-item__label" data-nav-key="setup">ุชูุธูุงุช</span>
      </button>
      <button class="nav-item disabled" data-route="night">
        <span class="nav-item__icon">๐</span>
        <span class="nav-item__label" data-nav-key="night">ุดุจ</span>
      </button>
      <button class="nav-item disabled" data-route="day">
        <span class="nav-item__icon">โ๏ธ</span>
        <span class="nav-item__label" data-nav-key="day">ุฑูุฒ</span>
      </button>
      <button class="nav-item disabled" data-route="summary">
        <span class="nav-item__icon">๐</span>
        <span class="nav-item__label" data-nav-key="summary">ุฎูุงุตู</span>
      </button>
    </nav>
  </div>

  <!-- App Script (ES Module) -->
  <script type="module" src="js/app.js"></script>

  <!-- Capacitor (native apps) -->
  <script type="module" src="js/native.js"></script>
  

  <!-- Service Worker Registration (PWA only, skip in native) -->
  <script>
    // Only register service worker when running as a PWA (not in Capacitor native)
    if (!window.Capacitor && 'serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(reg => console.log('SW registered:', reg.scope))
          .catch(err => console.log('SW registration failed:', err));
      });
    }
  </script>
</body>
</html>
